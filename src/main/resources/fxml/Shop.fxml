<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.shape.Circle?>

<BorderPane prefHeight="708" prefWidth="1148"
    style="-fx-background-image: url('/images/space-background.jpg');                    
    -fx-background-size: cover;                    
    -fx-background-position: center;"
    xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1"
    fx:controller="controller.ShopController">

    <!-- TOP BAR -->
    <top>
        <HBox alignment="CENTER_LEFT" spacing="20"
            style="-fx-background-color: linear-gradient(to bottom, rgba(26, 32, 44, 0.98), rgba(26, 32, 44, 0.95));                      
            -fx-padding: 15 25;                      
            -fx-border-color: linear-gradient(to right, #00d4ff, #ff00ff);                      
            -fx-border-width: 0 0 3 0;                      
            -fx-effect: dropshadow(gaussian, rgba(0, 0, 0, 0.6), 15, 0, 0, 5);">

            <!-- Back Button -->
            <Button fx:id="backButton" onAction="#backToMenu"
                style="-fx-font-size: 14px; 
                -fx-font-weight: bold;                            
                -fx-background-color: linear-gradient(to bottom, #ef4444, #dc2626);                            
                -fx-text-fill: white;                            
                -fx-padding: 10 24;                            
                -fx-background-radius: 8;                            
                -fx-cursor: hand;                            
                -fx-effect: dropshadow(gaussian, rgba(239, 68, 68, 0.5), 10, 0, 0, 3);"
                text="â—€ BACK" />

            <Region HBox.hgrow="ALWAYS" />

            <!-- Title -->
            <VBox alignment="CENTER" spacing="2">
                <Label
                    style="-fx-font-size: 32px; 
                    -fx-font-weight: bold;                               
                    -fx-text-fill: linear-gradient(to right, #00d4ff, #ff00ff);                               
                    -fx-effect: dropshadow(gaussian, rgba(0, 212, 255, 0.8), 15, 0, 0, 0);"
                    text="ARKANOID SHOP" />
                <Label style="-fx-font-size: 12px; -fx-text-fill: #94a3b8;"
                    text="âš¡ Upgrade Your GAME âš¡" />
            </VBox>

            <Region HBox.hgrow="ALWAYS" />

            <!-- Coins Display -->
            <HBox alignment="CENTER" spacing="10"
                style="-fx-background-color: linear-gradient(to right, rgba(234, 179, 8, 0.2), rgba(202, 138, 4, 0.2));                          
                -fx-padding: 10 20;                          
                -fx-background-radius: 12;                          
                -fx-border-color: #f59e0b;                          
                -fx-border-width: 2;                          
                -fx-border-radius: 12;                          
                -fx-effect: dropshadow(gaussian, rgba(245, 158, 11, 0.6), 15, 0, 0, 0);">
                <Label style="-fx-font-size: 24px;" text="ðŸ’°" />
                <Label fx:id="coinsLabel"
                    style="-fx-font-size: 26px; -fx-font-weight: bold;                               
                    -fx-text-fill: #fbbf24;                               
                    -fx-effect: dropshadow(gaussian, rgba(251, 191, 36, 0.8), 8, 0, 0, 0);"
                    text="0" />
            </HBox>
        </HBox>
    </top>

    <!-- MAIN CONTENT -->
    <center>
        <HBox spacing="0" style="-fx-background-color: transparent;">

            <!-- LEFT SIDEBAR - VERTICAL TABS -->
            <VBox spacing="0"
                style="-fx-background-color: linear-gradient(to bottom, rgba(17, 24, 39, 0.95), rgba(17, 24, 39, 0.90));                          
                -fx-border-color: rgba(75, 85, 99, 0.5);                          
                -fx-border-width: 0 2 0 0;                          
                -fx-min-width: 160;                          
                -fx-max-width: 160;">

                <!-- SHOP Tab -->
                <VBox fx:id="shopTab" alignment="CENTER" onMouseClicked="#selectShopTab" spacing="8"
                    style="-fx-padding: 25 15;                              
                    -fx-background-color: linear-gradient(to right, rgba(0, 212, 255, 0.25), rgba(0, 212, 255, 0.08));                              
                    -fx-border-color: #00d4ff;                              
                    -fx-border-width: 0 4 2 0;                              
                    -fx-cursor: hand;">
                    <Label
                        style="-fx-font-size: 36px;                                            
                        -fx-effect: dropshadow(gaussian, rgba(0, 212, 255, 0.8), 12, 0, 0, 0);"
                        text="ðŸ›’" />
                    <Label
                        style="-fx-font-size: 16px; -fx-font-weight: bold;                                   
                        -fx-text-fill: #00d4ff;                                   
                        -fx-effect: dropshadow(gaussian, rgba(0, 212, 255, 0.6), 8, 0, 0, 0);"
                        text="POWER UP" />
                    <Label
                        style="-fx-font-size: 9px; -fx-text-fill: #94a3b8;                                   
                        -fx-wrap-text: true; -fx-text-alignment: center;"
                        text="Items &amp; Upgrades" />
                </VBox>

                <!-- SKINS Tab -->
                <VBox fx:id="skinsTab" alignment="CENTER" onMouseClicked="#selectSkinsTab"
                    spacing="8"
                    style="-fx-padding: 25 15;                              
                    -fx-background-color: rgba(55, 65, 81, 0.3);                              
                    -fx-border-color: #4b5563;                              
                    -fx-border-width: 0 0 2 0;                              
                    -fx-cursor: hand;">
                    <Label style="-fx-font-size: 36px; -fx-opacity: 0.7;" text="ðŸŽ¨" />
                    <Label
                        style="-fx-font-size: 16px; -fx-font-weight: bold;                                   
                        -fx-text-fill: #9ca3af;"
                        text="SKINS" />
                    <Label
                        style="-fx-font-size: 9px; -fx-text-fill: #6b7280;                                   
                        -fx-wrap-text: true; -fx-text-alignment: center;"
                        text="Customization" />
                </VBox>

                <Region
                    style="-fx-background-color: linear-gradient(to bottom, transparent, rgba(17, 24, 39, 0.5));"
                    VBox.vgrow="ALWAYS" />

                <!-- Decorative elements -->
                <VBox alignment="CENTER" spacing="15" style="-fx-padding: 20;">
                    <Circle radius="3"
                        style="-fx-fill: linear-gradient(to bottom, #00d4ff, #0080ff); -fx-opacity: 0.5;" />
                    <Circle radius="2"
                        style="-fx-fill: linear-gradient(to bottom, #8b5cf6, #7c3aed); -fx-opacity: 0.4;" />
                    <Circle radius="3"
                        style="-fx-fill: linear-gradient(to bottom, #10b981, #059669); -fx-opacity: 0.5;" />
                </VBox>
            </VBox>

            <!-- RIGHT CONTENT AREA -->
            <BorderPane style="-fx-background-color: rgba(15, 23, 42, 0.92);" HBox.hgrow="ALWAYS">

                <!-- Message Label -->
                <top>
                    <HBox alignment="CENTER" style="-fx-padding: 12;">
                        <Label fx:id="messageLabel" prefHeight="43.0" prefWidth="927.0"
                            style="-fx-font-size: 15px; -fx-font-weight: bold;                                       
                            -fx-text-fill: #4ade80;                                       
                            -fx-padding: 10 20;                                       
                            -fx-background-color: rgba(74, 222, 128, 0.15);                                       
                            -fx-background-radius: 8;                                       
                            -fx-border-color: #22c55e;                                       
                            -fx-border-width: 1.5;                                       
                            -fx-border-radius: 8;"
                            text="" />
                    </HBox>
                </top>

                <!-- CONTENT AREA with StackPane -->
                <center>
                    <StackPane>
                        <!-- SHOP TAB CONTENT -->
                        <ScrollPane fx:id="shopScrollPane" fitToWidth="true" hbarPolicy="NEVER"
                            style="-fx-background: transparent;                                            
                            -fx-background-color: transparent;"
                            vbarPolicy="ALWAYS">
                            <VBox spacing="30" style="-fx-padding: 25;">

                                <!-- CONSUMABLE ITEMS -->
                                <VBox spacing="18">
                                    <Label
                                        style="-fx-font-size: 24px; -fx-font-weight: bold;                                                   
                                        -fx-text-fill: linear-gradient(to right, #60a5fa, #3b82f6);                                                   
                                        -fx-effect: dropshadow(gaussian, rgba(59, 130, 246, 0.5), 10, 0, 0, 0);"
                                        text="âš¡ CONSUMABLE ITEMS" />

                                    <HBox alignment="CENTER" spacing="18">
                                        <!-- Wide Paddle Item -->
                                        <VBox alignment="CENTER" spacing="12"
                                            style="-fx-background-color: linear-gradient(to bottom, rgba(59, 130, 246, 0.15), rgba(37, 99, 235, 0.1));                                                      
                                            -fx-padding: 25;                                                      
                                            -fx-background-radius: 16;                                                      
                                            -fx-border-color: #3b82f6;                                                      
                                            -fx-border-width: 2;                                                      
                                            -fx-border-radius: 16;                                                      
                                            -fx-min-width: 250;                                                      
                                            -fx-max-width: 250;                                                      
                                            -fx-effect: dropshadow(gaussian, rgba(59, 130, 246, 0.3), 15, 0, 0, 5);">
                                            <Label
                                                style="-fx-font-size: 48px;                                                                    
                                                -fx-effect: dropshadow(gaussian, rgba(59, 130, 246, 0.8), 15, 0, 0, 0);"
                                                text="ðŸ›¸" />
                                            <Label
                                                style="-fx-font-size: 18px; -fx-font-weight: bold;                                                           
                                                -fx-text-fill: #f1f5f9;"
                                                text="Wide Paddle" />
                                            <Label
                                                style="-fx-font-size: 11px; -fx-text-fill: #cbd5e1;                                                           
                                                -fx-wrap-text: true; -fx-text-alignment: center;"
                                                text="Expand paddle for 10 seconds" />
                                            <Label fx:id="wideItemLabel"
                                                style="-fx-font-size: 11px; -fx-text-fill: #60a5fa;                                                           
                                                -fx-font-weight: bold;"
                                                text="Owned: 0" />
                                            <HBox alignment="CENTER" spacing="8">
                                                <Label
                                                    style="-fx-font-size: 22px; -fx-font-weight: bold; -fx-text-fill: #fbbf24;"
                                                    text="3" />
                                                <Label style="-fx-font-size: 20px;" text="ðŸ’°" />
                                            </HBox>
                                            <Button onAction="#buyWideItem"
                                                style="-fx-font-size: 15px; -fx-font-weight: bold;                                                            
                                                -fx-background-color: linear-gradient(to bottom, #3b82f6, #2563eb);                                                            -fx-text-fill: white;                                                            
                                                -fx-padding: 10 40;                                                            
                                                -fx-background-radius: 10;                                                            
                                                -fx-cursor: hand;                                                            
                                                -fx-effect: dropshadow(gaussian, rgba(59, 130, 246, 0.5), 10, 0, 0, 3);"
                                                text="BUY NOW" />
                                        </VBox>

                                        <!-- Extra Life Item -->
                                        <VBox alignment="CENTER" spacing="12"
                                            style="-fx-background-color: linear-gradient(to bottom, rgba(236, 72, 153, 0.15), rgba(219, 39, 119, 0.1));                                                      
                                            -fx-padding: 25;                                                      
                                            -fx-background-radius: 16;                                                     
                                            -fx-border-color: #ec4899;                                                      
                                            -fx-border-width: 2;                                                      
                                            -fx-border-radius: 16;                                                     
                                            -fx-min-width: 250;                                                      
                                            -fx-max-width: 250;                                                      
                                            -fx-effect: dropshadow(gaussian, rgba(236, 72, 153, 0.3), 15, 0, 0, 5);">
                                            <Label
                                                style="-fx-font-size: 48px;                                                                    
                                                -fx-effect: dropshadow(gaussian, rgba(236, 72, 153, 0.8), 15, 0, 0, 0);"
                                                text="ðŸ’–" />
                                            <Label
                                                style="-fx-font-size: 18px; -fx-font-weight: bold;                                                           
                                                -fx-text-fill: #f1f5f9;"
                                                text="Extra Life" />
                                            <Label
                                                style="-fx-font-size: 11px; -fx-text-fill: #cbd5e1;                                                           
                                                -fx-wrap-text: true; -fx-text-alignment: center;"
                                                text="Gain +1 life instantly" />
                                            <Label fx:id="lifeItemLabel"
                                                style="-fx-font-size: 11px; -fx-text-fill: #f472b6;                                                           
                                                -fx-font-weight: bold;"
                                                text="Owned: 0" />
                                            <HBox alignment="CENTER" spacing="8">
                                                <Label
                                                    style="-fx-font-size: 22px; -fx-font-weight: bold; -fx-text-fill: #fbbf24;"
                                                    text="5" />
                                                <Label style="-fx-font-size: 20px;" text="ðŸ’°" />
                                            </HBox>
                                            <Button onAction="#buyLifeItem"
                                                style="-fx-font-size: 15px; -fx-font-weight: bold;                                                            
                                                -fx-background-color: linear-gradient(to bottom, #ec4899, #db2777);                                                            -fx-text-fill: white;                                                            
                                                -fx-padding: 10 40;                                                            
                                                -fx-background-radius: 10;                                                            
                                                -fx-cursor: hand;                                                            
                                                -fx-effect: dropshadow(gaussian, rgba(236, 72, 153, 0.5), 10, 0, 0, 3);"
                                                text="BUY NOW" />
                                        </VBox>

                                        <!-- Slow Ball Item -->
                                        <VBox alignment="CENTER" spacing="12"
                                            style="-fx-background-color: linear-gradient(to bottom, rgba(34, 197, 94, 0.15), rgba(22, 163, 74, 0.1));                                                      
                                            -fx-padding: 25;                                                      
                                            -fx-background-radius: 16;                                                      
                                            -fx-border-color: #22c55e;                                                      
                                            -fx-border-width: 2;                                                      
                                            -fx-border-radius: 16;                                                      
                                            -fx-min-width: 250;                                                      
                                            -fx-max-width: 250;                                                      
                                            -fx-effect: dropshadow(gaussian, rgba(34, 197, 94, 0.3), 15, 0, 0, 5);">
                                            <Label
                                                style="-fx-font-size: 48px;                                                                    
                                                -fx-effect: dropshadow(gaussian, rgba(34, 197, 94, 0.8), 15, 0, 0, 0);"
                                                text="ðŸŒ" />
                                            <Label
                                                style="-fx-font-size: 18px; -fx-font-weight: bold;                                                           
                                                -fx-text-fill: #f1f5f9;"
                                                text="Slow Ball" />
                                            <Label
                                                style="-fx-font-size: 11px; -fx-text-fill: #cbd5e1;                                                           
                                                -fx-wrap-text: true; -fx-text-alignment: center;"
                                                text="Slow ball speed for 10 seconds" />
                                            <Label fx:id="slowItemLabel"
                                                style="-fx-font-size: 11px; -fx-text-fill: #4ade80;                                                           
                                                -fx-font-weight: bold;"
                                                text="Owned: 0" />
                                            <HBox alignment="CENTER" spacing="8">
                                                <Label
                                                    style="-fx-font-size: 22px; -fx-font-weight: bold; -fx-text-fill: #fbbf24;"
                                                    text="4" />
                                                <Label style="-fx-font-size: 20px;" text="ðŸ’°" />
                                            </HBox>
                                            <Button onAction="#buySlowItem"
                                                style="-fx-font-size: 15px; -fx-font-weight: bold;                                                            
                                                -fx-background-color: linear-gradient(to bottom, #22c55e, #16a34a);                                                            -fx-text-fill: white;                                                            
                                                -fx-padding: 10 40;                                                            
                                                -fx-background-radius: 10;                                                            
                                                -fx-cursor: hand;                                                            
                                                -fx-effect: dropshadow(gaussian, rgba(34, 197, 94, 0.5), 10, 0, 0, 3);"
                                                text="BUY NOW" />
                                        </VBox>
                                    </HBox>
                                </VBox>

                                <!-- Separator -->
                                <Separator
                                    style="-fx-background-color: linear-gradient(to right, transparent, rgba(139, 92, 246, 0.5), transparent);                                                    
                                    -fx-padding: 10 0;" />

                                <!-- PERMANENT UPGRADES -->
                                <VBox spacing="18">
                                    <Label
                                        style="-fx-font-size: 24px; -fx-font-weight: bold;                                                   
                                        -fx-text-fill: linear-gradient(to right, #c084fc, #a855f7);                                                   
                                        -fx-effect: dropshadow(gaussian, rgba(168, 85, 247, 0.5), 10, 0, 0, 0);"
                                        text="ðŸ”§ PERMANENT UPGRADES" />

                                    <HBox alignment="CENTER">
                                        <VBox alignment="CENTER" spacing="14"
                                            style="-fx-background-color: linear-gradient(to bottom, rgba(168, 85, 247, 0.18), rgba(147, 51, 234, 0.12));                                                      
                                            -fx-padding: 30;                                                      
                                            -fx-background-radius: 16;                                                      
                                            -fx-border-color: #a855f7;                                                      
                                            -fx-border-width: 2.5;                                                      
                                            -fx-border-radius: 16;                                                      
                                            -fx-min-width: 400;                                                      
                                            -fx-max-width: 400;                                                      
                                            -fx-effect: dropshadow(gaussian, rgba(168, 85, 247, 0.4), 20, 0, 0, 8);">
                                            <Label
                                                style="-fx-font-size: 56px;                                                                    
                                                -fx-effect: dropshadow(gaussian, rgba(168, 85, 247, 0.9), 20, 0, 0, 0);"
                                                text="ðŸ”§" />
                                            <Label
                                                style="-fx-font-size: 22px; -fx-font-weight: bold;                                                           
                                                -fx-text-fill: #f1f5f9;"
                                                text="Paddle Width +20" />
                                            <Label
                                                style="-fx-font-size: 13px; -fx-text-fill: #cbd5e1;"
                                                text="Permanently increase paddle size" />
                                            <HBox alignment="CENTER" spacing="10">
                                                <Label
                                                    style="-fx-font-size: 28px; -fx-font-weight: bold; -fx-text-fill: #fbbf24;"
                                                    text="8" />
                                                <Label style="-fx-font-size: 24px;" text="ðŸ’°" />
                                            </HBox>
                                            <Button onAction="#buyPaddleWidth"
                                                style="-fx-font-size: 17px; -fx-font-weight: bold;                                                            
                                                -fx-background-color: linear-gradient(to bottom, #a855f7, #9333ea);                                                            -fx-text-fill: white;                                                            
                                                -fx-padding: 12 50;                                                            
                                                -fx-background-radius: 12;                                                            
                                                -fx-cursor: hand;                                                            
                                                -fx-effect: dropshadow(gaussian, rgba(168, 85, 247, 0.6), 12, 0, 0, 4);"
                                                text="BUY UPGRADE" />
                                        </VBox>
                                    </HBox>
                                </VBox>

                                <!-- Bottom Spacer -->
                                <Region style="-fx-min-height: 30;" />
                            </VBox>
                        </ScrollPane>

                        <!-- SKINS TAB CONTENT -->
                        <ScrollPane fx:id="skinsScrollPane" fitToWidth="true" hbarPolicy="NEVER"
                            managed="false"
                            style="-fx-background: transparent;                                            
                            -fx-background-color: transparent;"
                            vbarPolicy="ALWAYS" visible="false">
                            <VBox spacing="30" style="-fx-padding: 25;">
                                <!-- PADDLE SKINS -->
                                <VBox spacing="18">
                                    <Label
                                        style="-fx-font-size: 24px; -fx-font-weight: bold;                                                   
                                        -fx-text-fill: linear-gradient(to right, #fb923c, #f97316);                                                   
                                        -fx-effect: dropshadow(gaussian, rgba(251, 146, 60, 0.5), 10, 0, 0, 0);"
                                        text="ðŸŽ¨ PADDLE SKINS" />

                                    <HBox fx:id="paddleSkinBox" alignment="CENTER" spacing="15"
                                        style="-fx-padding: 10;" />

                                    <HBox alignment="CENTER" style="-fx-padding: 10 0;">
                                        <Button fx:id="selectPaddleButton"
                                            onAction="#handlePaddleAction"
                                            style="-fx-font-size: 16px; -fx-font-weight: bold;                                                        
                                            -fx-background-color: linear-gradient(to bottom, #22c55e, #16a34a);                                                        -fx-text-fill: white;                                                        
                                            -fx-padding: 12 50;                                                        
                                            -fx-background-radius: 10;                                                        
                                            -fx-cursor: hand;                                                        
                                            -fx-effect: dropshadow(gaussian, rgba(34, 197, 94, 0.5), 10, 0, 0, 3);"
                                            text="SELECT" />
                                    </HBox>
                                </VBox>

                                <!-- Separator -->
                                <Separator
                                    style="-fx-background-color: linear-gradient(to right, transparent, rgba(236, 72, 153, 0.5), transparent);                                                    
                                    -fx-padding: 10 0;" />

                                <!-- BALL SKINS -->
                                <VBox spacing="18">
                                    <Label
                                        style="-fx-font-size: 24px; -fx-font-weight: bold;                                                   
                                        -fx-text-fill: linear-gradient(to right, #f472b6, #ec4899);                                                   
                                        -fx-effect: dropshadow(gaussian, rgba(236, 72, 153, 0.5), 10, 0, 0, 0);"
                                        text="ðŸŽ¨ BALL SKINS" />

                                    <HBox fx:id="ballSkinBox" alignment="CENTER" spacing="15"
                                        style="-fx-padding: 10;" />

                                    <HBox alignment="CENTER" style="-fx-padding: 10 0 30 0;">
                                        <Button fx:id="selectBallButton"
                                            onAction="#handleBallAction"
                                            style="-fx-font-size: 16px; -fx-font-weight: bold;                                                        
                                            -fx-background-color: linear-gradient(to bottom, #22c55e, #16a34a);                                                        -fx-text-fill: white;                                                        
                                            -fx-padding: 12 50;                                                        
                                            -fx-background-radius: 10;                                                        
                                            -fx-cursor: hand;                                                       
                                            -fx-effect: dropshadow(gaussian, rgba(34, 197, 94, 0.5), 10, 0, 0, 3);"
                                            text="SELECT" />
                                    </HBox>
                                </VBox>

                                <!-- Bottom Spacer -->
                                <Region style="-fx-min-height: 30;" />
                            </VBox>
                        </ScrollPane>
                    </StackPane>
                </center>
            </BorderPane>
        </HBox>
    </center>
</BorderPane>